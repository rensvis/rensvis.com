---
import { getCollection, getEntry, render } from 'astro:content';
import PageLayout from '../../layouts/PageLayout.astro';
import ArticleLayout from '../../layouts/ArticleLayout.astro';
import { SITE } from '../../lib/site';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles.map((entry) => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

interface Props {
  entry: Awaited<ReturnType<typeof getCollection>>[number];
}

const { entry } = Astro.props;
const { Content, headings } = await render(entry);
---

<PageLayout title={`${entry.data.title} | ${SITE.name}`} description={entry.data.description}>
  <ArticleLayout entry={entry}>
    <article class="prose prose-neutral dark:prose-invert mx-auto max-w-2xl px-4 py-16">
      <Content />
    </article>
  </ArticleLayout>
</PageLayout>
