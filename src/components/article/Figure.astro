---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

// TODO: When article images are added, consider widths/sizes for responsive optimization
// (article container is max-w-2xl = 672px). E.g. widths={[400, 672, 800]}.
interface Props {
  src: ImageMetadata | string;
  alt: string;
  caption?: string;
}

const { src, alt, caption } = Astro.props;
---

<figure class="my-8">
  {typeof src === 'string' ? (
    <img src={src} alt={alt} class="w-full rounded-lg border border-border" loading="lazy" />
  ) : (
    <Image src={src} alt={alt} class="w-full rounded-lg border border-border" />
  )}
  {caption && (
    <figcaption class="mt-2 text-center text-sm text-muted-foreground">
      {caption}
    </figcaption>
  )}
</figure>
